<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>obornik-wyborczy</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya+Sans:100,300,400">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Average+Sans">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:200i,300,400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body><header class="test-header">
    <a href="#" target="blank">
        <picture class="test-logo">
            <source media="(min-width:576px)" srcset="https://latarnikwyborczy.pl/front/img/logo.svg">"
            <img src="https://latarnikwyborczy.pl/front/img/logo_1_linia.svg" alt="Logo Obornik Wybrczy"></picture>
    </a>
</header>
    <main class="test-main">
        <div class="container test-container">
            <div class="test-questioner">
                <div id="step_0" class="test-step">
                    <h2 class="test-title">Jak wypełnić test?</h2>
                    <div class="test-intro-content">
                        <p>Przed Tobą test składający się z <strong>x&nbsp;stwierdzeń</strong>&nbsp;dotyczących różnych kwestii politycznych, społecznych i ekonomicznych.<br>Przy każdym stwierdzeniu wybierz&nbsp;<strong>jedną z odpowiedzi</strong>: Zgadzam
                            się, Nie zgadzam się lub Nie mam zdania.<br></p>
                        <p>Jeżeli masz wątpliwości co do treści stwierdzenia, możesz skorzystać z krótkiego wyjaśnienia, klikając na słowo “<strong>wyjaśnienie</strong>” w prawym górnym rogu ekranu.<br></p>
                        <p>Po wypełnieniu testu Obornik&nbsp;<strong>porówna Twoje odpowiedzi</strong>&nbsp;z deklaracjami komitetów wyborczych i pokaże Ci procentową zgodność Waszych odpowiedzi.<br></p><p style="text-align: center;">
    <br>
    <br>
    
    <img alt="Czacki News logo" src="assets/img/logo_transparent.png" style="width: 200px; max-width: 100%; vertical-align: middle; text-align: center;">
    
</p>
                        <div class="test-button-div"><a id="start-test" class="test-button text-decoration-none test-button-next" href="#">ROZPOCZNIJ TEST</a></div>
                    </div>
                </div>
                <div id="step_1" class="test-step inactive"><h2 class="test-title">Stwierdzenie: <span>1/x</span></h2>
                    <div class="test-question-container">
                        <p class="test-question">Konsul powinien informować uczniów, dokąd nocą tupta jeż.</p>
                    </div>
                    <ul class="test-help">
                        <li><a class="test-explenation-open" href="#" data-toggle="modal">WYJAŚNIENIE</a></li>
                    </ul>
                    <div class="test-buttons">
                        <div class="test-wrapper">
                            <div class="test-slide">
                                <div class="test-more-buttons">
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next agreed" href="#">ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next non-agreed" href="#">NIE ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next neutral" href="#">NIE MAM ZDANIA</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="step_2" class="test-step inactive"><h2 class="test-title">Stwierdzenie: <span>1/x</span></h2>
                    <div class="test-question-container">
                        <p class="test-question">Konsul powinien być prostym chłopakiem z Krosna.</p>
                    </div>
                    <ul class="test-help">
                        <li><a class="test-explenation-open" href="#" data-toggle="modal">WYJAŚNIENIE</a></li>
                    </ul>
                    <div class="test-buttons">
                        <div class="test-wrapper">
                            <div class="test-slide">
                                <div class="test-more-buttons">
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next agreed" href="#">ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next non-agreed" href="#">NIE ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next neutral" href="#">NIE MAM ZDANIA</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="step_3" class="test-step inactive"><h2 class="test-title">Stwierdzenie: <span>1/x</span></h2>
                    <div class="test-question-container">
                        <p class="test-question">Debata w TVP jest ustawiona.</p>
                    </div>
                    <ul class="test-help">
                        <li><a class="test-explenation-open" href="#" data-toggle="modal">WYJAŚNIENIE</a></li>
                    </ul>
                    <div class="test-buttons">
                        <div class="test-wrapper">
                            <div class="test-slide">
                                <div class="test-more-buttons">
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next agreed" href="#">ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next non-agreed" href="#">NIE ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next neutral" href="#">NIE MAM ZDANIA</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="step_4" class="test-step inactive"><h2 class="test-title">Stwierdzenie: <span>1/x</span></h2>
                    <div class="test-question-container">
                        <p class="test-question">Rafał kłamie.</p>
                    </div>
                    <ul class="test-help">
                        <li><a class="test-explenation-open" href="#" data-toggle="modal">WYJAŚNIENIE</a></li>
                    </ul>
                    <div class="test-buttons">
                        <div class="test-wrapper">
                            <div class="test-slide">
                                <div class="test-more-buttons">
                                    <div class="test-button-button"><a class="test-button text-decoration-none agreed test-button-next" href="#">ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next non-agreed" href="#">NIE ZGADZAM SIĘ</a></div>
                                    <div class="test-button-button"><a class="test-button text-decoration-none test-button-next neutral" href="#">NIE MAM ZDANIA</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script>
    
    var current_question = 0;
    var testbuttonnext = document.getElementsByClassName("test-button-next");
    var next_question_num = current_question + 1;
    //alert(testbuttonnext.length);

    //Adds functionality to the "I agree", "I disagree" and "I don't mind" buttons
    const user_answers = [];

    var agreed = document.getElementsByClassName("agreed");
    var nonagreed = document.getElementsByClassName("non-agreed");
    var neutral = document.getElementsByClassName("neutral");

    for (var i = 0; i < agreed.length; i++) {
        agreed[i].addEventListener("click", function(){setAnswer(1)})
    };
    for (var i = 0; i < nonagreed.length; i++) {
        nonagreed[i].addEventListener("click", function(){setAnswer(2)})
    };
    for (var i = 0; i < neutral.length; i++) {
        neutral[i].addEventListener("click", function(){setAnswer(3)})
    };

    var all_steps_len = document.getElementsByClassName("test-step").length;

    function setAnswer(userAnswer){
        //alert('Twoja odpowiedź to ' + userAnswer.toString());
        var user_answer_index = current_question - 1;
        user_answers.push(userAnswer);
    }

    // end of the section

    for (var i = 0; i < testbuttonnext.length; i++) {
        testbuttonnext[i].addEventListener("click", function(){nextQuestion(current_question + 1)})
    };

    function nextQuestion(question_num) {
        var all_step = document.getElementsByClassName("test-step");
        //alert(all_step.length);
        for(i=0; i<all_step.length; i++){
            //alert('Sprawdzam ' + i.toString());
            if(all_step[i].classList.contains('inactive') == false && i != question_num){
                //alert('Step o indexie ' + i.toString() + 'nie posiada już klasę inactive');
                all_step[i].className += " inactive";
                //break;
            }
        }
        current_question = current_question + 1;
        if (current_question != all_step.length) {
        var step_to_show_name = 'step_' + question_num.toString();
        var step_to_show = document.getElementById(step_to_show_name);
        step_to_show.className = step_to_show.className.replace(" inactive", "");
        
        } else {
        //alert(user_answers);
        resultCheck();
        };
    }

    
    
    

    //var current_question = 0;
    var questions = ["Konsul powinien informować uczniów, dokąd nocą tupta jeż.",
    "Konsul powinien być prostym chłopakiem z Krosna.",
    "Debata w TVP jest ustawiona.",
    "Rafał kłamie."];

    //0 - brak odpowiedzi,
    //1 - tak,
    //2 - nie,
    //3 - nie mam zdania

    var odp_duda = [1, 2, 2, 1];
    var odp_biedron = [1, 1, 1, 3];
    var odp_trzaskowski = [2, 2, 1, 2];
    var odp_bosak = [1, 2, 1, 1];
    var odp_zoltek = [1, 2, 3, 1];

    var candidates_answers = [odp_duda, odp_biedron, odp_trzaskowski, odp_bosak, odp_zoltek];
    var candidates_surnames = ["A. Duda", "R. Biedroń", "R. Trzaskowski", "K. Bosak", "S. Żółtek"];

    
    function resultCheck(){
        var results = [0, 0, 0, 0, 0];
        //alert(user_answers.length);
        var max_points = 3 * user_answers.length;

        var i;
        for (i=0; i<=questions.length; i++) {
            var j;
            for (j=0; j<candidates_answers.length; j++){

                var current_user_answer = user_answers[i];
                var current_candidate = candidates_answers[j];
                var current_candidate_answer = current_candidate[i];



                if (current_user_answer == current_candidate_answer && (current_user_answer == 1 || current_user_answer == 2)) {
                    results[j] += 3;
                } else if (current_user_answer == current_candidate_answer && current_user_answer == 3) {
                    results[j] += 2;
                } else if (current_user_answer == 3 || current_candidate_answer == 3) {
                    results[j] += 1;
                }

                //alert("obecnie sprawdzany kandydat to " + candidates_surnames[j] + ". Jego odpowiedź to " + current_candidate_answer.toString() + ", zaś moja to " + current_user_answer.toString() + ". Za to pytanie kandydat otrzymał " + results[j].toString());
            }
        }
        //alert (results);

        var result_string = "Oto Twoje wyniki! ";

        var k;
        for (k=0; k<candidates_answers.length; k++) {
            var result_percent = results[k] / max_points * 100
            result_percent = Math.round(result_percent);
            var string_to_add = candidates_surnames[k] + ": " + result_percent.toString() +"%, "
            result_string += string_to_add;
        }

        alert(result_string);
    };


    
</script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/script.js"></script>
</body>

</html>